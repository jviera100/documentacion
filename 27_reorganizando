# Gu√≠a de Estudio de Networking: Del Modelo OSI a la Pr√°ctica

## Introducci√≥n: ¬øQu√© es Internet y C√≥mo se Organiza la Comunicaci√≥n?

**Internet** es una "red de redes" (internetwork) global que interconecta millones de dispositivos (computadoras, servidores, m√≥viles) mediante tecnolog√≠as cableadas e inal√°mbricas, permitiendo el intercambio de informaci√≥n a escala mundial.

**Analog√≠a del Viaje de Datos:**
Cuando los datos viajan por la red, es como una persona en un viaje internacional:
*   **Identificaci√≥n:** Necesita identificadores (direcciones MAC y IP).
*   **Origen y Destino:** Requiere una direcci√≥n de partida y una de llegada.
*   **Permanencia:** Las conexiones tienen una duraci√≥n.

Para entender este complejo proceso, se utilizan modelos de referencia:

1.  **Modelo TCP/IP (Transmission Control Protocol/Internet Protocol):**
    *   Un modelo pr√°ctico y el est√°ndar de facto en Internet. Se organiza en capas:
        *   **Acceso a la Red (Network Access):** C√≥mo los datos se mueven por el medio f√≠sico y la red local.
        *   **Internet:** Direccionamiento l√≥gico y enrutamiento global (principal protocolo: **IP - Internet Protocol**).
        *   **Transporte (Transport):** Comunicaci√≥n extremo a extremo, confiable o r√°pida (principales protocolos: **TCP - Transmission Control Protocol**, **UDP - User Datagram Protocol**).
        *   **Aplicaci√≥n (Application):** Interfaz para aplicaciones de usuario y servicios de red (Ej: HTTP).

2.  **Modelo OSI (Open Systems Interconnection):**
    *   Un modelo conceptual de 7 capas, m√°s detallado, que ayuda a entender cada paso de la comunicaci√≥n.

**Tabla Comparativa de Capas TCP/IP vs. OSI:**

| N¬∫ | Capa TCP/IP     | Capa OSI        | Funci√≥n Principal                               | Detalles Clave y Ejemplos Pr√°cticos (PDU)                                                                                                                                                                                                                               | ¬øC√≥mo Recordarlo F√°cil?                                    |
|----|-----------------|-----------------|-------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
| 7  | Aplicaci√≥n      | Aplicaci√≥n      | **(Usuario y Servicios)**                       | Interfaz para aplicaciones (HTTP, FTP, SMTP, DNS). *Ej: Navegador usando HTTP.* (Datos)                                                                                                                                                                                | **A**ll **P**eople **S**eem **T**o **N**eed **D**ata **P**rocessing (De arriba abajo) O "El programa que usas" |
| 6  | Aplicaci√≥n      | Presentaci√≥n    | **(Formato y Cifrado)**                         | Formateo de datos (ASCII, JPEG), cifrado (SSL/TLS), compresi√≥n. *Ej: HTTPS cifrando datos.* (Datos)                                                                                                                                                                   | "Traduce y Protege"                                        |
| 5  | Aplicaci√≥n      | Sesi√≥n          | **(Conexiones y Di√°logos)**                     | Establece, gestiona y finaliza sesiones entre aplicaciones. *Ej: Videoconferencia activa.* (Datos)                                                                                                                                                                   | "La Conversaci√≥n Continua"                                 |
| 4  | Transporte      | Transporte      | **(Comunicaci√≥n Confiable o R√°pida Extremo-a-Extremo)** | Segmentaci√≥n, control de flujo. **TCP** (confiable, orientado a conexi√≥n, ACK/NACK) vs. **UDP** (r√°pido, sin conexi√≥n). *Ej: Descarga (TCP), Streaming (UDP).* (Segmentos/Datagramas)                                                                        | "Elige el Mensajero: Confianza o Velocidad"                |
| 3  | Internet        | Red             | **(Direccionamiento L√≥gico y Enrutamiento Global)** | Direccionamiento IP, enrutamiento de paquetes entre redes. *Ej: Paquete viajando por routers.* (Paquetes)                                                                                                                                                              | "El Mapa de la Red"                                        |
| 2  | Acceso a la Red | Enlace de Datos | **(Enlace Local y Direccionamiento F√≠sico)**    | Transferencia de tramas en la misma red local. Direcciones MAC, control de acceso al medio (CSMA/CD). Tecnolog√≠as: Ethernet, Wi-Fi. *Ej: PC a router v√≠a Wi-Fi.* (Tramas)                                                                                                | "La Calle Local"                                           |
| 1  | Acceso a la Red | F√≠sica          | **(Transmisi√≥n F√≠sica de Bits)**                | Transmisi√≥n de bits por el medio (cables, ondas). Voltajes, conectores, codificaci√≥n. *Ej: Cable Ethernet transmitiendo se√±ales.* (Bits)                                                                                                                              | "El Cable y las Ondas"                                     |

A continuaci√≥n, exploraremos los conceptos de red siguiendo la estructura del Modelo OSI.

---

## Capa 1: F√≠sica ‚Äì La Transmisi√≥n de Bits

*   **Funci√≥n Principal (OSI):** Transmitir el flujo de bits (0s y 1s) a trav√©s del medio f√≠sico. Define caracter√≠sticas el√©ctricas, mec√°nicas y funcionales (voltajes, tasas de bits, conectores, tipos de cable, radiofrecuencias).
*   **Equivalente TCP/IP:** Parte de la capa de Acceso a la Red.
*   **PDU (Protocol Data Unit):** Bits.

### Medios de Red
El "camino" f√≠sico por el que viajan los datos.

| Medio                               | Tipo de Se√±al         | Distancia M√°xima Aprox. | Entorno de Instalaci√≥n | Ancho de Banda/Velocidad | Costo          | Funcionalidad Principal                                                                |
|-------------------------------------|-----------------------|-------------------------|------------------------|--------------------------|----------------|----------------------------------------------------------------------------------------|
| **Par Trenzado (UTP/STP Cat5e/6/6a)** | Impulsos El√©ctricos   | 100 metros (Ethernet)   | Interior               | Moderado a Alto          | Bajo a Moderado | Conexi√≥n en LANs. Base de la mayor√≠a de redes locales.                                   |
| **Coaxial**                           | Impulsos El√©ctricos   | Media                   | Interior/Exterior      | Moderado                 | Moderado       | TV por cable, antiguas conexiones a Internet.                                          |
| **Fibra √ìptica (F.O.)**               | Pulsos de Luz         | Varios kil√≥metros+      | Interior/Exterior      | Muy Alto                 | Alto           | Redes troncales, alta velocidad, inmune a EMI/RFI.                                     |
| **Inal√°mbrico (Wi-Fi, Bluetooth, Celular)** | Ondas Electromagn√©ticas | Variable                | Interior/Exterior      | Bajo a Alto              | Bajo a Moderado | Conexi√≥n sin cables (WLAN, WPAN, WWAN).                                                |
*(EMI: Interferencia Electromagn√©tica, RFI: Interferencia de Radiofrecuencia)*

### üîß Multiplexaci√≥n
T√©cnica para combinar m√∫ltiples flujos de datos en un √∫nico canal de comunicaci√≥n compartido.

| Tipo                                  | Explicaci√≥n Simple                                                    | Ejemplo Pr√°ctico                                     |
|---------------------------------------|-----------------------------------------------------------------------|------------------------------------------------------|
| **FDM (Frequency Division Multiplexing)** | Cada se√±al viaja por una "banda" de frecuencia diferente.               | Radio FM/AM, TV anal√≥gica.                           |
| **TDM (Time Division Multiplexing)**    | Cada se√±al usa todo el canal, pero en peque√±os turnos de tiempo.        | Telefon√≠a digital (l√≠neas T1/E1).                    |
| **WDM (Wavelength Division Multiplexing)**| Para fibra √≥ptica; m√∫ltiples "colores" (longitudes de onda) de luz.   | Internet por fibra √≥ptica de alta capacidad (DWDM).  |
| **CDM (Code Division Multiplexing)**    | Cada se√±al se mezcla con un c√≥digo √∫nico para separarlas.              | Redes celulares (CDMA, WCDMA), GPS.                  |
| **SDM (Spatial Division Multiplexing)** | Utiliza diferentes rutas f√≠sicas o antenas para transmitir se√±ales.      | Antenas MIMO en Wi-Fi y 4G/5G.                       |

### Otros Conceptos y Dispositivos de Capa 1:
*   **Codificaci√≥n y Sincronizaci√≥n de Bits.**
*   **Dispositivos de Capa 1:**
    *   **Hubs (Concentradores):** Obsoletos. Repiten la se√±al a todos los puertos.
    *   **Repetidores:** Regeneran la se√±al para extender la distancia.
    *   **Transceptores (Transceivers):** Convierten se√±ales entre tipos de medios.
    *   **Cables y Conectores:** (RJ45, Fibra LC/SC, etc.).
    *   **Componente F√≠sico de la NIC:** La parte de la tarjeta de red que se conecta al medio.
*   **Dispositivos Finales:** (PCs, servidores, impresoras, tel√©fonos IP, etc.) se conectan f√≠sicamente en esta capa, aunque su operaci√≥n completa abarca capas superiores.

---

## Capa 2: Enlace de Datos ‚Äì Comunicaci√≥n en la Red Local

*   **Funci√≥n Principal (OSI):** Transferencia confiable de datos (en forma de **tramas**) entre dos nodos directamente conectados en la *misma red local (segmento de red)*. Se encarga del direccionamiento f√≠sico (MAC), control de acceso al medio, y detecci√≥n de errores b√°sicos.
*   **Equivalente TCP/IP:** Parte de la capa de Acceso a la Red.
*   **PDU (Protocol Data Unit):** Tramas.

### Organizaciones y Est√°ndares Clave:
*   **IEEE (Institute of Electrical and Electronics Engineers):** Define est√°ndares como IEEE 802.3 (Ethernet) y IEEE 802.11 (Wi-Fi).
*   Otras organizaciones como IETF (Internet Engineering Task Force) y la IANA (Internet Assigned Numbers Authority) son cruciales para el funcionamiento de Internet en general, pero el IEEE es central para las tecnolog√≠as de Capa 2.

### üí≥ Tarjeta de Interfaz de Red (NIC - Network Interface Card)
Hardware que permite la conexi√≥n del dispositivo a la red.
*   **Funci√≥n en Capa 2:** Contiene la direcci√≥n MAC √∫nica, participa en la creaci√≥n y procesamiento de tramas.
*   **Tipos:** Ethernet (cable), Wi-Fi (inal√°mbrica), Virtual (para VMs, VPNs).
*   **NIC vs. Interfaz vs. Gateway:**
    *   Una NIC **es** una interfaz f√≠sica.
    *   Un **Gateway** (Puerta de Enlace) es un dispositivo (generalmente un router) o su direcci√≥n IP en Capa 3, que permite la comunicaci√≥n con otras redes. Una NIC en un router sirve como interfaz para una red espec√≠fica y puede ser parte de un gateway.

### üßæ Direcci√≥n MAC (Media Access Control)
Identificador *√∫nico y f√≠sico* de 48 bits (6 bytes hexadecimales, ej: `00:1A:2B:3C:4D:5E`) asignado a cada NIC por el fabricante.
*   Es la direcci√≥n "local" utilizada para entregar tramas dentro de la misma LAN.
*   **MAC vs. M√°scara de Subred:**
    *   La direcci√≥n MAC (Capa 2) es un identificador de hardware.
    *   La M√°scara de Subred (Capa 3) se usa con direcciones IP para definir la red y el host. Son conceptos diferentes de capas distintas.

### Fundamentos de Protocolos de Red (Relevantes para todas las capas)
*   **Definici√≥n:** Reglas y convenciones para la comunicaci√≥n.
*   **Elementos Clave:** Formato del mensaje, tama√±o, temporizaci√≥n, encapsulaci√≥n, patrones de mensaje (Request/Response).

### üìÑ Encapsulaci√≥n y Trama Ethernet
*   **Encapsulaci√≥n General:** Proceso de a√±adir informaci√≥n de control (encabezados/tr√°ileres) a los datos a medida que descienden por las capas del modelo OSI.
*   **Trama Ethernet (IEEE 802.3):** Estructura de datos de Capa 2 para redes Ethernet.
    *   **Componentes Clave:**
        *   **Pre√°mbulo y SFD (Start Frame Delimiter):** Sincronizaci√≥n e indicador de inicio de trama.
        *   **Direcci√≥n MAC Destino:** Direcci√≥n f√≠sica del receptor en la LAN.
        *   **Direcci√≥n MAC Origen:** Direcci√≥n f√≠sica del emisor en la LAN.
        *   **EtherType/Longitud:** Indica el protocolo de Capa 3 encapsulado (ej: `0x0800` para IPv4) o la longitud del campo de datos.
        *   **Datos (Payload):** El paquete de Capa 3 (ej: paquete IP). (46 a 1500 bytes).
        *   **FCS (Frame Check Sequence):** Suma de verificaci√≥n (CRC) para detecci√≥n de errores en la trama.

### üì° Dispositivos Primarios de Capa 2
*   **Switches (Conmutadores):**
    *   Toman decisiones de reenv√≠o inteligentes basadas en direcciones MAC destino de las tramas.
    *   Crean una **tabla MAC** (o tabla CAM) que mapea direcciones MAC a puertos del switch.
    *   Cada puerto del switch es un **dominio de colisi√≥n** separado, reduciendo colisiones.
    *   Por defecto, un switch forma un √∫nico **dominio de difusi√≥n** (los broadcasts se inundan a todos los puertos excepto el de origen).
*   **Puntos de Acceso Inal√°mbricos (WAP o AP - Wireless Access Point):** Permiten a dispositivos Wi-Fi conectarse a una red cableada. Act√∫an como un bridge entre el medio inal√°mbrico y el cableado.

### üåê Tipos de Redes por Alcance (Conectividad Local)

| Tipo de Red                      | Descripci√≥n                                           | Cobertura T√≠pica    | Ejemplo                                               | Tecnolog√≠as Clave (Capa 1 y 2)  |
|----------------------------------|-------------------------------------------------------|---------------------|-------------------------------------------------------|---------------------------------|
| **WPAN (Wireless Personal Area Network)** | Conexi√≥n de dispositivos personales muy cercanos.       | Pocos metros        | Auriculares Bluetooth, wearables.                     | Bluetooth, Zigbee               |
| **LAN (Local Area Network)**       | Red en √°rea limitada (casa, oficina, edificio).       | Edificio            | Red de oficina cableada (Ethernet) o inal√°mbrica (WLAN). | Ethernet                        |
| **WLAN (Wireless LAN)**            | LAN que usa tecnolog√≠a inal√°mbrica.                   | Edificio, campus    | Red Wi-Fi de una casa u oficina.                      | Wi-Fi (IEEE 802.11)             |
*(MAN y WAN implican principalmente enrutamiento de Capa 3, aunque usan tecnolog√≠as de Capa 1 y 2 para los enlaces).*

### üî™ Segmentaci√≥n en Capa 2: VLANs y Dominios de Difusi√≥n
*   **Dominio de Difusi√≥n:** √Årea de una red donde un broadcast enviado por un dispositivo es recibido por todos los dem√°s. Los switches, por defecto, crean un solo dominio de difusi√≥n.
*   **Problemas con Dominios de Difusi√≥n Grandes:** Excesivo tr√°fico de broadcast puede ralentizar la red.
*   **VLANs (Virtual LANs):** Permiten segmentar l√≥gicamente una red f√≠sica (un switch) en m√∫ltiples dominios de difusi√≥n independientes.
    *   El tr√°fico entre VLANs diferentes requiere un dispositivo de Capa 3 (router o switch multicapa) para ser enrutado.
    *   Mejoran la seguridad, organizaci√≥n y gesti√≥n del tr√°fico.

### üó£Ô∏è Tipos de Comunicaci√≥n (Direccionamiento) en Capa 2
| Tipo       | Dirigido a...                              | MAC Destino Ejemplo            |
|------------|--------------------------------------------|--------------------------------|
| **Unicast**  | Una √∫nica NIC espec√≠fica en la LAN.        | `00:1A:2B:3C:4D:5E`            |
| **Multicast**| Un grupo de NICs en la LAN.                | `01:00:5E:xx:xx:xx` (para IPv4 multicast) |
| **Broadcast**| Todas las NICs en el dominio de difusi√≥n.  | `FF:FF:FF:FF:FF:FF`            |

---

## Capa 3: Red ‚Äì Direccionamiento L√≥gico y Enrutamiento Global

*   **Funci√≥n Principal (OSI):** Proporcionar direccionamiento l√≥gico √∫nico (principalmente **IP - Internet Protocol**) a los dispositivos en la internetwork y determinar la mejor ruta (**enrutamiento**) para los **paquetes** de datos a trav√©s de m√∫ltiples redes interconectadas.
*   **Equivalente TCP/IP:** Capa de Internet.
*   **PDU (Protocol Data Unit):** Paquetes.

### üìç Direccionamiento IP
#### Direcci√≥n IPv4 (32 bits)
*   Direcci√≥n l√≥gica, agrupada en cuatro octetos (bloques de 8 bits), usualmente representada en notaci√≥n decimal separada por puntos.
*   **Ejemplo:** Binario: `11000000.10101000.00000001.00000001` -> Decimal: `192.168.1.1`
*   Cada paquete IP contiene una direcci√≥n IP de origen y una de destino.

#### üîç M√°scara de Subred (IPv4)
Define qu√© parte de la direcci√≥n IP identifica la **RED** y qu√© parte identifica al **HOST** dentro de esa red.
*   **Concepto:** IP = Porci√≥n de RED + Porci√≥n de HOST.
*   **Identificaci√≥n:**
    *   `255` en un octeto de la m√°scara -> octeto correspondiente en la IP es parte de la RED.
    *   `0` en un octeto de la m√°scara -> octeto correspondiente en la IP es parte del HOST.
*   **C√°lculo Direcci√≥n de RED:** Tomar la porci√≥n de RED de la IP y poner a cero la porci√≥n de HOST.
    *   IP: `192.168.1.50`, M√°scara: `255.255.255.0` -> Direcci√≥n de RED: `192.168.1.0`.
*   Dispositivos en la misma Direcci√≥n de RED pertenecen a la misma subred.

#### üó£Ô∏è Tipos de Comunicaci√≥n IPv4
| Tipo       | Significado                     | Dirigido a...                              | Ejemplo de Direcci√≥n IP Destino (para una red 192.168.1.0/24) |
|------------|---------------------------------|--------------------------------------------|--------------------------------------------------------------|
| **Unicast**  | "Uno a uno"                     | Un √∫nico host espec√≠fico.                  | `192.168.1.50`                                               |
| **Broadcast**| "Uno a todos (en la subred)"    | Todos los hosts en la *misma subred*.      | `192.168.1.255` (Broadcast de la red), `255.255.255.255` (Broadcast limitado) |
| **Multicast**| "Uno a muchos (grupo)"          | Un grupo espec√≠fico de hosts suscritos.    | `224.0.0.5` (reservado para OSPF), `239.255.255.250` (SSDP) |
*(Los routers NO reenv√≠an paquetes de broadcast por defecto para evitar tormentas de broadcast).*

#### üè° Direcciones IPv4 P√∫blicas vs. Privadas
*   **P√∫blicas:** √önicas globalmente, enrutables en Internet. Asignadas por ISPs.
*   **Privadas:** Para uso en redes internas (LANs). No son enrutables directamente en Internet.
    *   **Rangos Privados RFC 1918:**
        *   `10.0.0.0` a `10.255.255.255` (`10.0.0.0/8`)
        *   `172.16.0.0` a `172.31.255.255` (`172.16.0.0/12`)
        *   `192.168.0.0` a `192.168.255.255` (`192.168.0.0/16`)
*   **NAT (Network Address Translation):** Proceso, usualmente en routers, que traduce direcciones IP privadas a una (o varias) direcci√≥n IP p√∫blica para permitir el acceso a Internet.

#### ‚öôÔ∏è Direcciones IPv4 Especiales
*   **Loopback:** `127.0.0.0/8` (com√∫nmente `127.0.0.1`). Se usa para probar la pila TCP/IP del propio host.
*   **Link-Local (APIPA - Automatic Private IP Addressing):** `169.254.0.0/16`. Autoasignada por sistemas operativos (como Windows) si no se puede obtener una direcci√≥n IP de un servidor DHCP. Permite comunicaci√≥n limitada en la red local.
*   **Experimental (TEST-NET):** `192.0.2.0/24`, `198.51.100.0/24`, `203.0.113.0/24` (reservadas para documentaci√≥n y ejemplos).
*   **Direcciones Reservadas (IANA):** Incluye rangos para multidifusi√≥n (`224.0.0.0/4`), futuro uso (`240.0.0.0/4`).

#### üìú Clases de Direcciones IPv4 (Hist√≥rico)
Sistema original de asignaci√≥n, obsoleto y reemplazado por **CIDR (Classless Inter-Domain Routing)** que permite m√°scaras de subred de longitud variable (VLSM) para un uso m√°s eficiente del espacio de direcciones.
| Clase | Rango 1er Octeto | M√°scara por Defecto (/CIDR) | Uso Original Hist√≥rico             |
|-------|------------------|---------------------------|------------------------------------|
| A     | 1-126            | `255.0.0.0` (/8)          | Redes muy grandes (pocos disponibles) |
| B     | 128-191          | `255.255.0.0` (/16)       | Redes medianas a grandes           |
| C     | 192-223          | `255.255.255.0` (/24)     | Redes peque√±as                     |
| D     | 224-239          | N/A                       | Multidifusi√≥n (Multicast)          |
| E     | 240-254          | N/A                       | Experimental (reservado)           |

#### üåê Asignaci√≥n de Direcciones IP
Jerarqu√≠a global:
**IANA (Internet Assigned Numbers Authority)** ‚Üí **RIRs (Regional Internet Registries)** como AfriNIC, APNIC, ARIN, LACNIC, RIPE NCC ‚Üí **ISPs (Proveedores de Servicios de Internet)** y grandes organizaciones ‚Üí Usuarios finales.

#### üöÄ Direcci√≥n IPv6 (128 bits)
Dise√±ada para suceder a IPv4 debido al agotamiento de direcciones.
*   **Formato:** 8 grupos (hextetos) de 4 d√≠gitos hexadecimales, separados por dos puntos (`:`).
    *   Ej: `2001:0db8:85a3:0000:0000:8a2e:0370:7334`
*   **Reglas de Abreviaci√≥n:**
    1.  **Omitir Ceros Iniciales:** En cualquier hexteto, los ceros a la izquierda se pueden omitir (ej: `0db8` ‚Üí `db8`; `000a` ‚Üí `a`). Un hexteto de `0000` se puede escribir como `0`.
    2.  **Comprimir Secuencia de Ceros:** Una *√∫nica* secuencia contigua de hextetos que sean todos cero puede reemplazarse por dos puntos dobles (`::`). *Esta regla solo puede aplicarse una vez por direcci√≥n*.
        *   Ej: `2001:0db8:0000:0000:0000:ff00:0042:8329` ‚Üí `2001:db8::ff00:42:8329`

### ‚öôÔ∏è Dispositivos de Capa 3: Routers (Enrutadores)
*   Funci√≥n principal: Conectar diferentes redes (subredes) y tomar decisiones de **enrutamiento** para reenviar paquetes entre ellas bas√°ndose en la direcci√≥n IP de destino.
*   Cada interfaz de un router pertenece a una red IP diferente y, por lo tanto, a un dominio de difusi√≥n diferente. **Los routers no propagan broadcasts por defecto.**
*   **Componentes Internos Clave:**
    *   **CPU:** Ejecuta el sistema operativo y los procesos de enrutamiento.
    *   **RAM:** Almacena la tabla de enrutamiento activa, la configuraci√≥n en ejecuci√≥n (running-config), colas de paquetes. Es vol√°til.
    *   **Memoria Flash:** Almacena la imagen del sistema operativo (ej: IOS en Cisco). Es no vol√°til.
    *   **NVRAM (Non-Volatile RAM):** Almacena la configuraci√≥n de inicio (startup-config). Es no vol√°til.
    *   **Interfaces:** Puertos f√≠sicos (Ethernet, Serial, etc.) para conectar a diferentes redes.
    *   **Fuente de Alimentaci√≥n.**
*   **ISR (Integrated Services Router):** Router que combina funciones de enrutamiento con otros servicios como firewall, VPN, telefon√≠a IP.

### üó∫Ô∏è Tabla de Enrutamiento
Base de datos que el router consulta para decidir c√≥mo reenviar un paquete.
*   **Contenido por entrada:**
    *   Red de destino y m√°scara de subred.
    *   Direcci√≥n IP del siguiente salto (el pr√≥ximo router en la ruta) o la interfaz de salida directa si la red est√° conectada directamente.
    *   M√©trica (un valor que indica la "preferencia" o "costo" de la ruta).
*   **Poblaci√≥n de la Tabla:**
    *   **Redes Conectadas Directamente:** Agregadas autom√°ticamente cuando una interfaz est√° configurada y activa.
    *   **Rutas Est√°ticas:** Configuradas manualmente por un administrador.
    *   **Rutas Din√°micas:** Aprendidas a trav√©s de protocolos de enrutamiento (ej: RIP, EIGRP, OSPF, BGP) que intercambian informaci√≥n de enrutamiento con otros routers.
*   **Ruta Predeterminada (Gateway of Last Resort):** Una ruta especial (a menudo `0.0.0.0/0`) que se usa si no existe una coincidencia m√°s espec√≠fica en la tabla para la red de destino. Dirige el tr√°fico hacia un router que tiene m√°s conocimiento de la red (ej: el router del ISP).
*   **Puerta de Enlace Predeterminada (Default Gateway):** En un host, es la direcci√≥n IP de la interfaz del router en su LAN a la que el host enviar√° todo el tr√°fico destinado a redes externas.

### üè¢ Dise√±o de Red Jer√°rquico
Modelo com√∫n para redes empresariales, usando switches y routers en capas para escalabilidad y eficiencia.
*   **Capa de N√∫cleo (Core):** Switches/routers de alta velocidad para transportar tr√°fico r√°pidamente entre diferentes partes de la red (ej: entre edificios o capas de distribuci√≥n). Enfocada en velocidad y redundancia.
*   **Capa de Distribuci√≥n:** Punto de agregaci√≥n para las capas de acceso. Implementa pol√≠ticas de red, enrutamiento entre VLANs, QoS, y conecta al n√∫cleo.
*   **Capa de Acceso:** Donde los dispositivos finales (usuarios, impresoras) se conectan a la red, usualmente mediante switches de acceso que proporcionan conectividad y pueden implementar VLANs.

### ü§ù Resoluci√≥n de Direcciones IP a MAC (Interacci√≥n Capa 3 - Capa 2)
Cuando un dispositivo necesita enviar un paquete:
1.  **Destino en la misma red local:**
    *   El dispositivo conoce la IP de destino. Necesita la direcci√≥n MAC de destino para crear la trama de Capa 2.
    *   Usa **ARP (Address Resolution Protocol)** para IPv4 o **NDP (Neighbor Discovery Protocol)** para IPv6.
    *   **Proceso ARP:**
        1.  **ARP Request (Broadcast):** El emisor env√≠a un mensaje a toda la LAN: "¬øQui√©n tiene la direcci√≥n IP [IP_Destino]? Por favor, env√≠ame tu direcci√≥n MAC." (MAC destino de la trama: `FF:FF:FF:FF:FF:FF`).
        2.  **ARP Reply (Unicast):** El dispositivo con [IP_Destino] responde directamente al emisor: "Yo tengo [IP_Destino], mi direcci√≥n MAC es [MAC_Destino]."
        3.  El emisor almacena esta correspondencia IP-MAC en su **tabla ARP (o cach√© ARP)** para uso futuro.
2.  **Destino en una red remota:**
    *   El dispositivo env√≠a el paquete a la direcci√≥n MAC de su **Puerta de Enlace Predeterminada (Default Gateway)** (el router local).
    *   El router, al recibir el paquete, consultar√° su tabla de enrutamiento y repetir√° un proceso similar para encontrar la MAC del siguiente salto o del destino final si est√° directamente conectado.

**Importante: Diferenciar ARP/NDP de otros protocolos:**
*   **ARP/NDP:** Descubren la direcci√≥n MAC asociada a una IP *dentro de la misma red local*.
*   **NAT (Network Address Translation):** Traduce IPs privadas a p√∫blicas (y viceversa) en el router frontera.
*   **DHCP (Dynamic Host Configuration Protocol):** Asigna din√°micamente direcciones IP y otra configuraci√≥n de red a los hosts.
*   **PDU (Protocol Data Units):** Nombre gen√©rico para la unidad de datos en cada capa (Bits en L1, Tramas en L2, Paquetes en L3, Segmentos/Datagramas en L4, Datos en L5-L7).

---

## Capa 4: Transporte ‚Äì Comunicaci√≥n Confiable o R√°pida Extremo a Extremo

*   **Funci√≥n Principal (OSI):** Proporcionar comunicaci√≥n l√≥gica directa y segmentaci√≥n de datos entre *procesos de aplicaci√≥n* en hosts diferentes. Ofrece servicios de transporte fiables y orientados a conexi√≥n (TCP) o servicios r√°pidos y no fiables sin conexi√≥n (UDP). Maneja el control de flujo y la multiplexaci√≥n de conversaciones usando n√∫meros de puerto.
*   **Equivalente TCP/IP:** Capa de Transporte.
*   **PDU (Protocol Data Unit):** Segmentos (TCP), Datagramas (UDP).

### üöö TCP (Transmission Control Protocol)
Protocolo orientado a conexi√≥n que proporciona entrega confiable y ordenada de datos.
*   **Caracter√≠sticas:**
    *   **Establecimiento de Conexi√≥n:** Usa un "saludo de tres v√≠as" (Three-Way Handshake: SYN, SYN-ACK, ACK) para establecer una sesi√≥n antes de transferir datos.
    *   **Entrega Confiable:** Numera los segmentos, requiere acuses de recibo (ACKs) del receptor. Retransmite segmentos perdidos o da√±ados.
    *   **Entrega Ordenada:** Reensambla los segmentos en el orden correcto en el destino.
    *   **Control de Flujo:** Gestiona la cantidad de datos enviados para no saturar al receptor (usando ventanas deslizantes).
    *   **Control de Congesti√≥n:** Reduce la tasa de transmisi√≥n si detecta congesti√≥n en la red.
*   **Uso T√≠pico:** HTTP/HTTPS (web), FTP (transferencia de archivos), SMTP/IMAP/POP3 (correo electr√≥nico), SSH (acceso remoto seguro).

### üöÄ UDP (User Datagram Protocol)
Protocolo sin conexi√≥n que proporciona una entrega r√°pida pero no fiable ("mejor esfuerzo").
*   **Caracter√≠sticas:**
    *   **Sin Conexi√≥n:** No establece sesi√≥n antes de enviar.
    *   **No Confiable:** No garantiza entrega, no retransmite datagramas perdidos, no asegura orden.
    *   **Baja Sobrecarga:** Encabezados m√°s peque√±os y menos procesamiento que TCP, lo que lo hace m√°s r√°pido.
*   **Uso T√≠pico:** DNS (resoluci√≥n de nombres), DHCP (configuraci√≥n IP), SNMP (gesti√≥n de red), TFTP (transferencia de archivos trivial), streaming de video/audio en tiempo real, juegos online (donde la velocidad es m√°s cr√≠tica que perder alg√∫n paquete ocasional).

### üî¢ N√∫meros de Puerto
Identificadores de 16 bits (0-65535) usados por TCP y UDP para diferenciar entre m√∫ltiples aplicaciones o procesos que se ejecutan en un host.
*   **Puerto de Origen:** Elegido din√°micamente por el host cliente (generalmente un n√∫mero alto, >1023) para identificar de forma √∫nica su lado de la conversaci√≥n.
*   **Puerto de Destino:** Usado por el cliente para indicar el servicio espec√≠fico solicitado en el servidor (ej: puerto 80 para HTTP).
*   **Rangos de Puertos (administrados por IANA):**
    *   **Puertos Bien Conocidos (Well-Known Ports: 0-1023):** Reservados para servicios y aplicaciones est√°ndar (HTTP: 80, HTTPS: 443, FTP: 21, SMTP: 25, DNS: 53).
    *   **Puertos Registrados (Registered Ports: 1024-49151):** Pueden ser registrados por desarrolladores de software para aplicaciones espec√≠ficas.
    *   **Puertos Din√°micos/Privados/Ef√≠meros (Dynamic/Private/Ephemeral Ports: 49152-65535):** Usados t√≠picamente como puertos de origen temporales por los clientes.

### üîå Sockets
Una combinaci√≥n √∫nica de una **direcci√≥n IP y un n√∫mero de puerto**. Identifica un extremo de una conexi√≥n de red.
*   Ejemplo: `192.168.1.100:49152` (IP del cliente y su puerto de origen ef√≠mero) conect√°ndose a `203.0.113.10:80` (IP del servidor web y su puerto de destino HTTP).
*   Permiten que un servidor maneje m√∫ltiples conexiones de clientes simult√°neamente, incluso al mismo servicio, porque cada socket (combinaci√≥n IP_origen:Puerto_origen + IP_destino:Puerto_destino) es √∫nico.

---

## Capas 5, 6 y 7: Sesi√≥n, Presentaci√≥n y Aplicaci√≥n ‚Äì La Interfaz con el Usuario y los Servicios de Red

En el modelo TCP/IP, las funciones de las capas de Sesi√≥n, Presentaci√≥n y Aplicaci√≥n del modelo OSI se consolidan en una √∫nica **Capa de Aplicaci√≥n**.

*   **Capa 5 (Sesi√≥n OSI):**
    *   **Funci√≥n:** Establece, gestiona y finaliza las "conversaciones" (sesiones) entre aplicaciones en diferentes hosts. Mantiene el di√°logo y sincroniza la comunicaci√≥n.
*   **Capa 6 (Presentaci√≥n OSI):**
    *   **Funci√≥n:** Asegura que los datos intercambiados sean comprensibles para las aplicaciones. Se encarga de la sintaxis y sem√°ntica de la informaci√≥n, incluyendo:
        *   **Formato de Datos y Codificaci√≥n de Caracteres:** (ej: ASCII, EBCDIC, Unicode).
        *   **Cifrado y Descifrado:** Para la seguridad (ej: SSL/TLS opera conceptualmente aqu√≠, aunque su implementaci√≥n a menudo se extiende a otras capas).
        *   **Compresi√≥n y Descompresi√≥n:** Para reducir el tama√±o de los datos.
*   **Capa 7 (Aplicaci√≥n OSI) / Capa de Aplicaci√≥n (TCP/IP):**
    *   **Funci√≥n:** Proporciona la interfaz directa entre las aplicaciones que usan los usuarios (o procesos de sistema) y los servicios de red subyacentes. Define los protocolos que las aplicaciones usan para intercambiar datos.
*   **PDU (Protocol Data Unit) en estas capas:** Generalmente se refiere como "Datos" o "Mensaje".

### üåê Servicios y Protocolos de Aplicaci√≥n Comunes

| Protocolo                                | Puerto(s) T√≠picos | Transporte Usado | Descripci√≥n Breve                                                                |
|------------------------------------------|-------------------|-------------------|----------------------------------------------------------------------------------|
| **DNS (Domain Name System)**             | 53                | UDP (consultas), TCP (transferencias de zona) | Traduce nombres de dominio (ej: www.google.com) a direcciones IP.                    |
| **HTTP (Hypertext Transfer Protocol)**     | 80                | TCP               | Protocolo para la transferencia de p√°ginas web y otros recursos en la World Wide Web. |
| **HTTPS (HTTP Secure)**                  | 443               | TCP               | Versi√≥n segura de HTTP; cifra la comunicaci√≥n usando TLS/SSL.                    |
| **FTP (File Transfer Protocol)**         | 21 (control), 20 (datos) | TCP            | Protocolo para transferir archivos entre cliente y servidor.                        |
| **TFTP (Trivial File Transfer Protocol)**| 69                | UDP               | Versi√≥n simplificada de FTP, sin autenticaci√≥n, para transferencias r√°pidas.          |
| **SMTP (Simple Mail Transfer Protocol)**   | 25                | TCP               | Para enviar correo electr√≥nico entre servidores y de cliente a servidor.            |
| **POP3 (Post Office Protocol v3)**       | 110               | TCP               | Para recuperar correo electr√≥nico de un servidor (generalmente descarga y borra del servidor). |
| **IMAP (Internet Message Access Protocol)**| 143               | TCP               | Para acceder a correo electr√≥nico en un servidor (mantiene los mensajes en el servidor). |
| **Telnet**                               | 23                | TCP               | Protocolo de emulaci√≥n de terminal remoto (inseguro, transmite en texto plano).       |
| **SSH (Secure Shell)**                   | 22                | TCP               | Protocolo seguro para acceso remoto a terminal, transferencia de archivos (SFTP), y t√∫neles. |
| **DHCP (Dynamic Host Configuration Protocol)**| 67 (servidor), 68 (cliente) | UDP    | Asigna autom√°ticamente direcciones IP y otra configuraci√≥n de red a los hosts.      |
| **SNMP (Simple Network Management Protocol)**| 161, 162          | UDP               | Para monitorizar y gestionar dispositivos de red.                                 |

**M√°s Detalles sobre Protocolos Seleccionados:**
*   **HTML (Hypertext Markup Language):** No es un protocolo de comunicaci√≥n, sino un lenguaje de marcado usado para estructurar y presentar contenido en p√°ginas web (transferido usando HTTP/HTTPS).
*   **VoIP (Voice over IP):** Familia de tecnolog√≠as y protocolos (como SIP, RTP) para transmitir voz sobre redes IP.
*   **SMS (Short Message Service):** Aunque asociado a m√≥viles, su infraestructura puede interactuar con redes IP.
*   **PSTN (Public Switched Telephone Network):** La red telef√≥nica tradicional. Gateways VoIP-PSTN permiten llamadas entre ambas.

### ‚öôÔ∏è Configuraci√≥n de Direcciones IP: Est√°tica vs. Din√°mica (DHCP)
Aunque DHCP usa UDP (Capa 4) y direcciones IP (Capa 3), su funci√≥n es un servicio de aplicaci√≥n para la configuraci√≥n de hosts.
*   **Est√°tica:** La direcci√≥n IP, m√°scara de subred, puerta de enlace predeterminada y servidores DNS se configuran manualmente en cada host.
    *   **Ventajas:** Control predecible (bueno para servidores, impresoras).
    *   **Desventajas:** Consume tiempo, propenso a errores de configuraci√≥n, dif√≠cil de gestionar en redes grandes.
*   **Din√°mica (usando DHCP):** Un servidor DHCP asigna autom√°ticamente la configuraci√≥n de red a los clientes.
    *   **Ventajas:** Simplifica la administraci√≥n, reduce errores, permite la reutilizaci√≥n eficiente de direcciones IP.
    *   **Proceso DORA (Discover, Offer, Request, Acknowledge):**
        1.  **Discover (Cliente ‚Üí Servidor, Broadcast):** Cliente busca un servidor DHCP.
        2.  **Offer (Servidor ‚Üí Cliente, Unicast o Broadcast seg√∫n cliente):** Servidor ofrece una configuraci√≥n IP.
        3.  **Request (Cliente ‚Üí Servidor, Broadcast):** Cliente solicita la configuraci√≥n ofrecida.
        4.  **Acknowledge (Servidor ‚Üí Cliente, Unicast o Broadcast seg√∫n cliente):** Servidor confirma la asignaci√≥n y el tiempo de **arrendamiento (lease)**.

### üîó Tipos de Conexi√≥n a Internet (Servicios)
Generalmente provistos por un **ISP (Proveedor de Servicios de Internet)**.
*   **DSL (Digital Subscriber Line):** Usa l√≠neas telef√≥nicas de cobre.
*   Otros: Cable Modem, Fibra √ìptica (FTTH), Sat√©lite, Celular (3G/4G/5G).

### üì° Identificadores de Red Comunes (Configuraci√≥n de Usuario)
*   **SSID (Service Set Identifier):** El nombre p√∫blico de una red Wi-Fi, configurado en el Punto de Acceso.
*   **Servidor DNS:** La direcci√≥n IP del servidor que el host usar√° para resolver nombres de dominio. A menudo se obtiene v√≠a DHCP.

---

## Herramientas de Soluci√≥n de Problemas de Red (CLI - Interfaz de L√≠nea de Comandos)

Estos comandos son esenciales para diagnosticar problemas de conectividad y configuraci√≥n en diversas capas.

### `ipconfig` (Windows) / `ifconfig` o `ip addr` (Linux/macOS)
Muestra la configuraci√≥n IP actual del host.
*   **Uso B√°sico:** Muestra direcci√≥n IP, m√°scara de subred, puerta de enlace predeterminada.
    ```cmd
    C:\> ipconfig
    ```
*   **Detallado (Windows):** `ipconfig /all` (muestra direcci√≥n MAC, servidores DNS, estado de DHCP, tiempo de lease).
    ```cmd
    C:\> ipconfig /all
    ```
*   **Liberar/Renovar IP (Windows DHCP):**
    *   `ipconfig /release` (libera la concesi√≥n DHCP actual).
    *   `ipconfig /renew` (solicita una nueva concesi√≥n DHCP).
    ```cmd
    C:\> ipconfig /release
    C:\> ipconfig /renew
    ```

### `ping` `[destino_IP_o_nombre_de_host]`
Prueba la conectividad de Capa 3 (alcance IP) con un host destino enviando mensajes ICMP Echo Request y esperando ICMP Echo Reply.
*   **Salida T√≠pica:** Indica si el destino respondi√≥, tiempo de ida y vuelta (latencia), TTL.
    ```cmd
    C:\> ping www.google.com
    Haciendo ping a www.google.com [142.250.190.36] con 32 bytes de datos:
    Respuesta desde 142.250.190.36: bytes=32 tiempo=10ms TTL=118
    ```
*   **Diagn√≥stico:**
    *   Si `ping` a un nombre de host falla pero a su IP funciona -> Problema de resoluci√≥n DNS.
    *   Si `ping` a la IP falla -> Problema de enrutamiento, firewall bloqueando ICMP, o el host destino no est√° disponible.
    *   Hacer `ping` a la puerta de enlace predeterminada puede ayudar a aislar si el problema es local o externo.

### `tracert` (Windows) / `traceroute` (Linux/macOS) `[destino_IP_o_nombre_de_host]`
Muestra la ruta (la secuencia de routers o "saltos") que toman los paquetes para llegar al destino. Env√≠a paquetes con TTL incremental.
*   √ötil para identificar d√≥nde se est√° perdiendo la conectividad o d√≥nde hay alta latencia en la ruta.
    ```cmd
    C:\> tracert www.google.com
    Traza a la direcci√≥n www.google.com [142.250.190.36]
    sobre un m√°ximo de 30 saltos:
      1    <1 ms    <1 ms    <1 ms  192.168.1.1
      2     8 ms     7 ms     8 ms  router.isp.example.com [ISP_ROUTER_IP]
      ...
     10    10 ms     9 ms    10 ms  dfw28s01-in-f4.1e100.net [142.250.190.36]
    Traza completa.
    ```

### `netstat`
Muestra informaci√≥n sobre conexiones de red activas, puertos en escucha, estad√≠sticas de Ethernet, la tabla de enrutamiento IP, estad√≠sticas de IPv4/IPv6, etc.
*   **Windows:**
    *   `netstat -a` (muestra todas las conexiones activas y puertos en escucha).
    *   `netstat -n` (muestra direcciones y n√∫meros de puerto en formato num√©rico).
    *   `netstat -o` (muestra el ID del proceso propietario de cada conexi√≥n).
    *   `netstat -r` (muestra la tabla de enrutamiento, similar a `route print`).
    *   Combinado: `netstat -ano`
*   **Linux:**
    *   `netstat -tulnp` (muestra puertos TCP y UDP en escucha (`l`), sin resolver nombres (`n`), con el programa/PID (`p`)). (Nota: `netstat` puede estar obsoleto en algunas distros Linux, reemplazado por `ss`).
    *   `ss -tulnp` (alternativa moderna a `netstat`).

### `nslookup` `[nombre_de_dominio_o_IP]`
Herramienta para consultar servidores DNS (Domain Name System).
*   **Uso B√°sico:** Resuelve un nombre de dominio a una direcci√≥n IP, o viceversa (b√∫squeda inversa si se proporciona una IP).
    ```cmd
    C:\> nslookup www.google.com
    Servidor:  mi.dns.local
    Address:  192.168.1.1

    Respuesta no autoritativa:
    Nombre:  www.google.com
    Addresses:  2607:f8b0:4004:c06::64
                142.250.190.36
    ```
*   Puede usarse en modo interactivo para especificar servidores DNS a consultar, tipos de registros a buscar (A, MX, NS, CNAME, etc.).

---
